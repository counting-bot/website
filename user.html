<!DOCTYPE HTML>
<html lang="en">
	<head>
        <!-- Primary Meta Tags -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Counting</title>
        <meta name="title" content="Counting">
        <link rel="icon" href="/assets/img/CountingIconRound.png" type="image/x-icon"/>
        <meta name="description" content="The most customizable counting bot. Compete with other Discord servers to get the highest count.">
        <meta name="keywords" content="discord counting bot, counting bot, counting game, counting, counting discord">
        <meta name="theme-color" content="#a329d1">

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://counting.numselli.xyz">
        <meta property="og:title" content="Counting">
        <meta property="og:description" content="The most customizable counting bot. Compete with other Discord servers to get the highest count.">
        <meta property="og:image" content="https://counting.numselli.xyz/assets/img/CountingIconRound.png">

        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image">
        <meta property="twitter:url" content="https://counting.numselli.xyz">
        <meta property="twitter:title" content="Counting">
        <meta property="twitter:description" content="The most customizable counting bot. Compete with other Discord servers to get the highest count.">
        <meta property="twitter:image" content="https://counting.numselli.xyz/assets/img/CountingIconRound.png">


        <!-- css imports -->
        <link href="/assets/css/Raleway.css" rel="stylesheet">
        <link href="/assets/css/style.css" rel="stylesheet">

        <!-- js imports -->
        <script type="application/javascript" async src="/assets/js/arcWidget.min.js"></script>
		<!-- <script type="application/javascript" async defer data-website-id="a82646c2-8bb3-4282-b185-2098b714f83a" src="https://insights.numselli.xyz/umami.js"></script> -->
	
        <!-- materialize -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" media="screen,projection">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    </head>

	<body>  
        <script>
            // event listeners
            document.addEventListener("DOMContentLoaded", async()=>{
                const navElems = document.querySelectorAll('.sidenav');
                let navInstances = M.Sidenav.init(navElems);

                const ajaxdata = await fetch(`https://api.numselli.xyz/discordOauth/user`, {credentials: "include"}).catch(err=>console.error);
                const ajaxdataJSON =  await ajaxdata.json()
                document.getElementById('username').textContent = `${ajaxdataJSON.username}#${ajaxdataJSON.discriminator}`   
                document.getElementById("avatar").src = ajaxdataJSON.avatarURL             

                const guilds = await fetch(`https://api.numselli.xyz/discordOauth/userGuilds`, {credentials: "include"}).catch(err=>console.error);
                const guildsJson =  await guilds.json()
                guildsJson.map(guild=>{
                    if (!guild.common && !guild.canInvite) return;
                    const linkDiv = document.createElement("a")
                    const guildDiv = document.createElement("div")
                    linkDiv.href = guild.common ? `/guild/${guild.id}` : `https://discord.com/oauth2/authorize?client_id=726560538145849374&scope=bot%20applications.commands&guild_id=${guild.id}`
                    linkDiv.classList='card-panel transparent'
                    linkDiv.style= `text-align: center;`

                    const imgNode = document.createElement("img")
                    imgNode.src = guild.iconURL
                    imgNode.alt= `${guild.name}'s guild icon`
                    imgNode.loading="lazy"
                    imgNode.style=`border-radius: 50%; filter: grayscale(${guild.common ? 0 : 90}%);`
                    imgNode.onerror=imgError
                    const imgNodeDiv = document.createElement("div")
                    imgNodeDiv.style="  position: relative;"
                    imgNodeDiv.append(imgNode)

                    if (!guild.common){
                        const imgOverlayNodeDiv = document.createElement("div")
                        imgOverlayNodeDiv.innerHTML = `<i class="medium material-icons">add_circle_outline</i>`
                        imgOverlayNodeDiv.classList="imageOverlay"
                        imgNodeDiv.appendChild(imgOverlayNodeDiv)
                    }
                    guildDiv.appendChild(imgNodeDiv)

                    const nameNode = document.createElement("span")
                    nameNode.innerText = guild.name
                    const nameNodeDiv = document.createElement("div")
                    nameNodeDiv.append(nameNode)
                    guildDiv.appendChild(nameNodeDiv)


                    linkDiv.appendChild(guildDiv)

                    document.getElementById("guildsDiv").appendChild(linkDiv)
                })
            });

            function imgError() {
                if (this.src != 'assets/img/error.png') this.src = 'assets/img/error.png';
            }
            // function formatNumber(num){
            //     return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")
            // }
        </script>
        <nav>
            <div class="nav-wrapper black">
                <a href="/login" class="right">Login</a>
                <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                <ul class="left hide-on-med-and-down">
                    <li><a href="/" id="navLinkInvite">Home</a></li>
                    <li><a href="/invite" id="navLinkInvite">Invite</a></li>
                    <li><a href="/support">Support</a></li>
                    <li><a href="https://donatebot.io/checkout/672259037861117964" rel="nofollow noopener" target="_blank" id="navLinkPremium">Premium</a></li>
                    <li><a href="/scores" id="navLinkScores">Scores</a> </li>
                    <li><a href="/userscores" id="navLinkUserScores">User Scores</a></li>
                    <li><a href="/privacy" id="navLinkPrivacy">Privacy</a></li>
                    <li><a href="/status" id="navLinkStatus">Status</a></ul>
                </ul>
            </div>
        </nav>

        <ul class="sidenav" id="mobile-demo">
            <li><a href="/" id="navLinkInvite">Home</a></li>
            <li><a href="/invite">Invite</a></li>
            <li><a href="/support">Support</a></li>
            <li><a href="https://donatebot.io/checkout/672259037861117964" rel="nofollow noopener" target="_blank" id="navLinkPremium">Premium</a></li>
            <li><a href="/scores" id="navLinkScores">Scores</a> </li>
            <li><a href="/userscores" id="navLinkUserScores">User Scores</a></li>
            <li><a href="/privacy" id="navLinkPrivacy">Privacy</a></li>
            <li><a href="/status" id="navLinkStatus">Status</a>/li></ul>
        </ul>

        <!-- Main -->
        <div id="main" style="height: 100%; width: 100%; margin: 0 auto;">
            <article id="scores" class="panel" style="width: 100%; margin: 0 auto;">
                <div class="row">

                    <div class="col s2">
                        <div>
                            <img src="" alt="" id="avatar" style="border-radius: 50%;">
                        </div>
                        <div>
                            <span id="username"></span>
                        </div>
                        <div>
                            <span>Global Stats</span> 
                            <br>
                            <span>Accuracy: 99.9%</span>
                            <br>
                            <span>‚úÖ: 13,631</span>
                            <br>
                            <span>‚ùå: 143</span>
                            <br>
                            <span>Total: 13,774</span>
                            <br>
                            <span>üÜò Saves left: 0/4</span>
                            <br>
                            <span>üÜò Saves used: 29</span>
                            <br>
                            <span>Rank: #5</span>
                        </div>
                    </div>
                    <div class="col s9">
                        <div class="row" id="guildsDiv">
                        </div>

                    </div>
                </div>

            </article>
        </div>
	</body>
</html>